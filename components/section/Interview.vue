<script setup>
const loading = ref(false);
const refQuestion = ref([
  {
    question: 'ê°œë°œìë¡œì„œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê°€ì¹˜ëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
    answer: `ê°œë°œìë¡œì„œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê°€ì¹˜ëŠ” 'ë³¸ì§ˆì„ ê¿°ëš«ëŠ” ì‚¬ê³ 'ì…ë‹ˆë‹¤.<br/>
ì €ëŠ” ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œë„, ë‹¨ìˆœíˆ ë°©ë²•ë§Œ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ 'ì™œ ì´ ê¸°ëŠ¥ì´ í•„ìš”í•œì§€', 'ì™œ ì´ ë°©ë²•ì´ ìµœì„ ì¸ì§€' ìŠ¤ìŠ¤ë¡œ ëŠì„ì—†ì´ ì§ˆë¬¸í•˜ë ¤ê³  í•©ë‹ˆë‹¤.
ì´ëŸ¬í•œ ë³¸ì§ˆ ì¤‘ì‹¬ì˜ ì‚¬ê³ ê°€ ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ë§Œë“¤ê³ , ê¾¸ì¤€íˆ ì„±ì¥í•˜ëŠ” ë° í•µì‹¬ì ì¸ ì—­í• ì„ í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.<br/>
ì•ìœ¼ë¡œë„ ì´ ê°€ì¹˜ë¥¼ ì§€í‚¤ë©°, ê¹Šì´ ìˆëŠ” ê°œë°œìê°€ ë˜ê³ ì í•©ë‹ˆë‹¤.`,
  },
  {
    question: 'ì§€ê¸ˆê¹Œì§€ ê²½í—˜í•œ ê¸°ìˆ  ìŠ¤íƒ ì¤‘ ê°€ì¥ ìì‹  ìˆëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?',
    answer: `ê°€ì¥ ìì‹  ìˆëŠ” ìŠ¤íƒì€ Vue.jsì™€ Nuxt.jsì…ë‹ˆë‹¤. ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” Node.jsì™€ SQL, Pythonì…ë‹ˆë‹¤. ì•ìœ¼ë¡œë„ ê¾¸ì¤€íˆ ì „ë¬¸ì„±ì„ ë†’ì—¬ë‚˜ê°ˆ ê³„íšì…ë‹ˆë‹¤.`,
  },
]);
const sampleQuestion = ref([
  'MBTI ì¤‘ E/I ì¤‘ ì–´ëŠ ìª½ì¸ê°€ìš”? ì‹¤ì œ ì¼í•  ë•ŒëŠ” ì–´ë–¤ ìŠ¤íƒ€ì¼ì¸ê°€ìš”?',
  'ê³µì‹ ë¬¸ì„œ ë¨¼ì € ë³´ëŠ” ìŠ¤íƒ€ì¼ vs íŠœí† ë¦¬ì–¼ë¶€í„° ë³´ëŠ” ìŠ¤íƒ€ì¼?',
  'í•˜ë‚˜ë¥¼ ê¹Šê²Œ íŒŒëŠ” í¸ vs ì—¬ëŸ¬ ê°€ì§€ë¥¼ ì–•ê²Œ ë„“ê²Œ ë³´ëŠ” í¸?',
  'ì§€ê¸ˆê¹Œì§€ ì§„í–‰í•œ í”„ë¡œì íŠ¸ ì¤‘ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” í”„ë¡œì íŠ¸ëŠ” ë¬´ì—‡ì¸ê°€ìš”?',
]);

async function askQuestion(question) {
  if (loading.value) return;

  loading.value = true;
  // const response = await fetch('http://YOUR_SERVER_IP:8000/ask', {
  //   method: 'POST',
  //   headers: { 'Content-Type': 'application/json' },
  //   body: JSON.stringify({ prompt: question }),
  // });
  // const data = await response.json();
  // console.log(data.response);
  refQuestion.value.push({ question: question });
  setTimeout(() => {
    loading.value = false;
    refQuestion.value[-1].answer = 'ë‹µë³€';
  }, 4000);
}
</script>

<template>
  <section class="Interview">
    <IOB>
      <h2 class="text-yellow not-draggable">INTERVIEW</h2>
    </IOB>
    <div class="section-inner">
      <div class="chat-wrap">
        <IOB>
          <div class="chat-bubble chat-a">
            <p>
              ì•ˆë…•í•˜ì„¸ìš”. <b>ë°•ìœ ë‚˜</b>ì…ë‹ˆë‹¤ â€” ì±—ë´‡ ë²„ì „ìœ¼ë¡œ ì¸ì‚¬ë“œë¦½ë‹ˆë‹¤.
              ğŸ˜Š<br />
              ì €ì˜ ê²½í—˜ê³¼ ìƒê°ì„ ìµœëŒ€í•œ ì˜ ì „ë‹¬í•´ë“œë¦´ ìˆ˜ ìˆë„ë¡ ì¤€ë¹„í–ˆìŠµë‹ˆë‹¤.<br />
              ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë‹¤ë©´ ì–¸ì œë“  ì§ˆë¬¸í•´ ì£¼ì„¸ìš”. ì„±ì‹¤í•˜ê²Œ
              ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
            </p>
          </div>
        </IOB>
        <template v-for="(item, index) in refQuestion" :key="index">
          <IOB>
            <div class="chat-bubble chat-q">
              <p>{{ item.question }}</p>
            </div>
          </IOB>
          <IOB>
            <div class="chat-bubble chat-a">
              <p v-html="item.answer" />
            </div>
          </IOB>
        </template>

        <div v-if="loading" class="flex justify-center">
          <span class="loader"></span>
        </div>
        <IOB>
          <div class="sample-question">
            <p>ì§ˆë¬¸ ì¶”ì²œ</p>
            <div>
              <button
                v-for="(question, i) in sampleQuestion"
                :key="i"
                @click="askQuestion(question)"
              >
                {{ question }}
              </button>
            </div>
          </div>
        </IOB>
      </div>

      <IOB class="chat-input-wrap">
        <div class="chat-input">
          <input type="text" />
        </div>
      </IOB>
    </div>
  </section>
</template>

<style lang="css" scoped>
.loader {
  width: 48px;
  height: 48px;
  border: 5px solid #dadada;
  border-bottom-color: var(--color-yellow);
  border-radius: 50%;
  display: inline-block;
  box-sizing: border-box;
  animation: rotation 1s linear infinite;
}

@keyframes rotation {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
section {
  background: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  margin-top: 40px;
  min-height: 832px;
}
.section-inner {
  position: relative;
  flex-direction: column;
  height: 100%;
}
.sample-question {
  margin-top: 7rem;
}
.sample-question div {
  display: flex;
  column-gap: 1rem;
  row-gap: 0.5rem;
  flex-wrap: wrap;
}
.sample-question p {
  font-size: 0.875rem;
  color: #999;
  margin-bottom: 0.5rem;
}
.sample-question button {
  font-size: 0.9375rem;
  background: #e9e9e9;
  padding: 10px 20px;
  border-radius: 40px;
}
</style>
